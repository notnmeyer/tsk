[tasks.build]
cmds = [
  "goreleaser build --single-target --snapshot --clean --output bin/tsk"
  # "go build -ldflags \"-X version.version=0.0.0\" -o bin/tsk ./cmd/tsk/..."
]

[tasks.release]
dotenv = ".env"
cmds = [
  "git tag -a v${version}",
  "git push --tags",
  "goreleaser release --clean",
]

[tasks.release_dry]
cmds = [
  "goreleaser release --clean --skip-publish --skip-validate"
]

[tasks.test]
cmds = ["go test ./..."]

[tasks.deps]
cmds = ["go mod tidy"]

[tasks.clean]
cmds = [
  "rm -f tsk",
  "rm -rf dist"
]
